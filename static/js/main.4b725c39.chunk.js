(this.webpackJsonpa=this.webpackJsonpa||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(26),c=n.n(a),i=(n(64),n(65),n(66),n(14)),l=n(19),s=n(15),u=n(18),d=n(53),p=n(22);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={entries:[],totalCount:0,loaded:!1};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={position:0,total:29,currentVideoIndex:0,movie:null};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={history:[],loaded:!1,pages:0,current_page:0},j=Object(u.c)({carousell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAROUSELL_LOADED":return f({},e,{entries:t.entries,totalCount:t.totalCount,loaded:!0});case"START_CAROUSELL_LOAD":return f({},e,{loaded:!1});default:return e}},position:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEFT_ARROW":return v({},e,{position:Math.max(e.position-1,0)});case"RIGHT_ARROW":return v({},e,{position:Math.min(e.position+1,e.total-1)});case"ENTER_KEY":return v({},e,{currentVideoIndex:e.position,movie:t.movie});case"CLICK_VIDEO":return v({},e,{position:t.currentVideoIndex,currentVideoIndex:t.currentVideoIndex,movie:t.movie});case"RESET_POSITION":return v({},e,{position:0,currentVideoIndex:0});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HISTORY":return O({},e,{history:t.history,loaded:!0,pages:t.pages,current_page:t.current_page});case"START_GET_HISTORY":return O({},e,{loaded:!1});default:return e}}}),w=[d.a],k=Object(u.e)(j,{},Object(u.d)(u.a.apply(void 0,w))),R=n(11),P=n(12),T=n(16),A=n(13),_=n(17),C=n(30),D="http://18.136.211.239:5000";var I=function(){return o.a.createElement("div",{className:"headerWrapper"},o.a.createElement("div",{className:"one"},o.a.createElement(i.b,{to:"/",id:"HomeMenu",tabIndex:0},"Home")),o.a.createElement("div",{className:"two has-text-right"},o.a.createElement(i.b,{to:"history",id:"HistoryMenu",tabIndex:1},"History")))},N=function(e){var t=document.getElementById("HomeMenu"),n=document.getElementById("HistoryMenu");switch(e.key){case"ArrowUp":window.pageYOffset||(document.activeElement===t?n.focus():t.focus());break;case"ArrowDown":document.activeElement.blur()}return document.activeElement!==n&&document.activeElement!==t},x=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.postHistoryActions,n=e.movie;if(null===n||void 0===n||!n.contents[0].url)return null;if(t({username:"kayin",title:n.title,description:n.description,videoUrl:n.contents[0].url,imageUrl:n.images[0].url}),document.onkeydown=function(e){if(N(e)){var t=Object(C.a)("video");switch(e.key){case" ":case"Enter":t.paused()?t.play():t.pause();break;case"ArrowRight":t.currentTime(t.currentTime()+10);break;case"ArrowLeft":t.currentTime(t.currentTime()-10);break;case"f":t.requestFullscreen()}}},document.getElementById("video")){var r=Object(C.a)("video");r.play(),r.on("ended",(function(){window.location.href="/"}))}}},{key:"componentWillUnmount",value:function(){Object(C.a)("video").dispose()}},{key:"render",value:function(){var e=this.props.movie;return null!==e&&void 0!==e&&e.contents[0].url?o.a.createElement("div",null,o.a.createElement(I,null),o.a.createElement("div",{key:"".concat(e.title),className:"container body","data-test":"VideoComponent"},o.a.createElement("div",{className:"is-centered has-text-centered"},"Now Playing: ",e.title,o.a.createElement("video",{id:"video",className:"video-js videoStyle",controls:!0,preload:"auto"},o.a.createElement("source",{src:e.contents[0].url,type:"video/mp4"}))))):(window.location.href="/",null)}}]),t}(o.a.Component),S=Object(s.b)((function(e){return{movie:e.position.movie}}),{postHistoryActions:function(e){return function(t){console.log(e),fetch("".concat(D,"/history/add"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?e.json().then((function(e){})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}}})(x),L=n(28),H=function(e,t){return function(n){n({type:"CLICK_VIDEO",movie:e,index:t})}},M=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props;(0,t.getHistoryActions)(null,"kayin",t.current_page),document.onkeydown=function(t){e.handleKeyDown(t),N(t)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.getHistoryActions,r=t.current_page,o=t.pages,a=t.loaded;switch(e.key){case"ArrowLeft":n(a,"kayin",Math.max(0,r-1));break;case"ArrowRight":n(a,"kayin",Math.min(o-1,r+1))}}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.getHistoryActions,r=e.current_page,a=e.pages,c=e.loaded;console.log(r),console.log(a);var i="",l="";if(null!==t)return 0!=t.length&&(l=o.a.createElement("div",null,o.a.createElement("p",{className:"has-text-centered"},"Page ",r+1," of ",a),o.a.createElement("br",null),o.a.createElement("div",{className:"buttons is-centered"},o.a.createElement("button",{className:"is-link button",onClick:function(){return n(c,"kayin",Math.max(0,r-1))}},"Prev"),o.a.createElement("button",{className:"is-link button",onClick:function(){return n(c,"kayin",Math.min(a-1,r+1))}},"Next"))),i=o.a.createElement("div",null,o.a.createElement("table",{className:"table","data-test":"HistoryTable"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Description"),o.a.createElement("th",null,"Watch Date"))),o.a.createElement("tbody",null,t.map((function(e,t){var n=function(e){var t=e.replace("T"," "),n=(t=t.substring(0,t.length-5)).split(" "),r=Object(L.a)(n,2);return[r[0],r[1]]}(e.createdAt),r=Object(L.a)(n,2),a=r[0],c=r[1];return o.a.createElement("tr",{key:e.createdAt,"data-test":"HistoryTableRow",id:"row".concat(t)},o.a.createElement("td",null,o.a.createElement("img",{src:e.imageUrl})),o.a.createElement("td",null,e.title),o.a.createElement("td",null,e.description),o.a.createElement("td",null,a,o.a.createElement("br",null),c))})))))),o.a.createElement("div",null,o.a.createElement(I,null),o.a.createElement("div",{className:"is-centered container","data-test":"FullWatchHistory"},o.a.createElement("p",{className:"has-text-centered"},"Your recent views",o.a.createElement("br",null),!1===c?o.a.createElement("i",{class:"fas fa-spinner fa-spin"}):"",!0===c&&0===t.length?"No view history":""),t.length>=5?l:"",o.a.createElement("br",null),i,o.a.createElement("br",null),l))}}]),t}(o.a.Component),V=Object(s.b)((function(e){return{history:e.history.history,loaded:e.history.loaded,pages:e.history.pages,current_page:e.history.current_page}}),{getHistoryActions:function(e,t,n){return function(r){!1!==e&&(r({type:"START_GET_HISTORY"}),fetch("".concat(D,"/history?username=").concat(t,"&page=").concat(n)).then((function(e){200===e.status?e.json().then((function(e){r({type:"GET_HISTORY",history:e.data,pages:e.pages,current_page:e.current_page})})):console.log("ERROR")})).catch((function(e){return console.log(e)})))}},videoClick:H})(M),U=n(41),Y=n.n(U),W=n(58),B=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.movie,n=e.position;n===e.selectedPosition&&document.getElementById("view-".concat(n).concat(t.title)).scrollIntoView({behavior:"smooth",block:"end"})}},{key:"render",value:function(){var e=this.props,t=e.movie,n=e.position,r=e.selectedPosition;return o.a.createElement("div",{id:"view-".concat(n).concat(t.title),className:"column movie","data-test":"Card"},o.a.createElement("div",null,o.a.createElement("img",{src:t.images[0].url,alt:"".concat(t.title,"-image"),className:n===r?"movieimg":""}),o.a.createElement("br",null),o.a.createElement("p",{className:"is-size-7"},t.title)))}}]),t}(o.a.Component),G=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.loadCarousell)(),document.onkeydown=function(){var t=Object(W.a)(Y.a.mark((function t(n){var r,o,a,c,i;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(r=N(n))){t.next=3;break}return t.abrupt("return");case 3:return o=e.props,a=o.keyDown,c=o.entries,i=o.selectedPosition,t.next=6,a(n,c[i]);case 6:"Enter"===n.key&&r&&e.props.history.push("/video");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var t=document.getElementById("carousell-scroll");t&&t.addEventListener("wheel",(function(e){e.deltaY>.1?t.scrollLeft+=100:e.deltaY<-.1&&(t.scrollLeft-=100)}))}},{key:"render",value:function(){var e=this.props,t=e.entries,n=e.selectedPosition,r=e.videoClick;return o.a.createElement("div",null,o.a.createElement(I,null),o.a.createElement("div",{"data-test":"Carousell"},o.a.createElement("p",{className:"has-text-centered"},"Video List"),o.a.createElement("div",{className:"carousell-wrapper"},o.a.createElement("div",{className:"carousell",id:"carousell-scroll"},o.a.createElement("div",{className:"columns is-mobile"},t.map((function(e,t){return o.a.createElement(i.b,{to:"/video",key:"".concat(t).concat(e.title),onClick:function(){return r(e,t)}},o.a.createElement(B,{movie:e,position:t,selectedPosition:n}))})))))))}}]),t}(o.a.Component),K=Object(s.b)((function(e){return{entries:e.carousell.entries,loaded:e.carousell.loaded,totalCount:e.carousell.totalCount,lastInteractPosition:e.position.lastInteractPosition,selectedPosition:e.position.position}}),{loadCarousell:function(){return function(e){e({type:"START_CAROUSELL_LOAD"}),fetch("".concat(D,"/moviedata")).then((function(t){200===t.status?t.json().then((function(t){e({type:"CAROUSELL_LOADED",entries:t.entries,totalCount:t.totalCount}),e({type:"RESET_POSITION"})})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}},keyDown:function(e,t){return function(n){switch(e.key){case"ArrowLeft":n({type:"LEFT_ARROW"});break;case"ArrowRight":n({type:"RIGHT_ARROW"});break;case"Enter":n({type:"ENTER_KEY",movie:t})}}},videoClick:H})(G);c.a.render(o.a.createElement(s.a,{store:k},o.a.createElement(i.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:K}),o.a.createElement(l.a,{path:"/history",exact:!0,component:V}),o.a.createElement(l.a,{path:"/video",exact:!0,component:S})))),document.getElementById("root"))},59:function(e,t,n){e.exports=n(104)},64:function(e,t,n){},66:function(e,t,n){},71:function(e,t){}},[[59,1,2]]]);
//# sourceMappingURL=main.4b725c39.chunk.js.map