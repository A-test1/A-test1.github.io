(this.webpackJsonpa=this.webpackJsonpa||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(26),c=n.n(o),i=(n(64),n(65),n(66),n(14)),l=n(19),s=n(15),u=n(18),d=n(53),p=n(22);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={entries:[],totalCount:0,loaded:!1};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={position:0,total:29,currentVideoIndex:0,movie:null};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={history:[],loaded:!1,pages:0,current_page:0},j=Object(u.c)({carousell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAROUSELL_LOADED":return f({},e,{entries:t.entries,totalCount:t.totalCount,loaded:!0});case"START_CAROUSELL_LOAD":return f({},e,{loaded:!1});default:return e}},position:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEFT_ARROW":return b({},e,{position:Math.max(e.position-1,0)});case"RIGHT_ARROW":return b({},e,{position:Math.min(e.position+1,e.total-1)});case"ENTER_KEY":return b({},e,{currentVideoIndex:e.position,movie:t.movie});case"CLICK_VIDEO":return b({},e,{position:t.currentVideoIndex,currentVideoIndex:t.currentVideoIndex,movie:t.movie});case"RESET_POSITION":return b({},e,{position:0,currentVideoIndex:0});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HISTORY":return O({},e,{history:t.history,loaded:!0,pages:t.pages,current_page:t.current_page});case"START_GET_HISTORY":return O({},e,{loaded:!1});default:return e}}}),w=[d.a],k=Object(u.e)(j,{},Object(u.d)(u.a.apply(void 0,w))),R=n(11),P=n(12),T=n(16),A=n(13),_=n(17),C=n(30),D="http://18.136.211.239:5000";var I=function(){return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(i.b,{to:"/",id:"HomeMenu",tabIndex:0},"Home")),r.a.createElement("div",{className:"navbar-item"},r.a.createElement(i.b,{to:"history",id:"HistoryMenu",tabIndex:1},"History")),r.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-end"}))},N=function(e){var t=document.getElementById("HomeMenu"),n=document.getElementById("HistoryMenu");switch(e.key){case"ArrowUp":window.pageYOffset||(document.activeElement===t?n.focus():t.focus());break;case"ArrowDown":document.activeElement.blur()}return document.activeElement!==n&&document.activeElement!==t},x=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.postHistoryActions,n=e.movie;if(null===n||void 0===n||!n.contents[0].url)return null;if(t({username:"kayin",title:n.title,description:n.description,videoUrl:n.contents[0].url,imageUrl:n.images[0].url}),document.onkeydown=function(e){if(N(e)){var t=Object(C.a)("video");switch(e.key){case" ":case"Enter":t.paused()?t.play():t.pause();break;case"ArrowRight":t.currentTime(t.currentTime()+10);break;case"ArrowLeft":t.currentTime(t.currentTime()-10)}}},document.getElementById("video")){var a=Object(C.a)("video");a.play(),a.on("ended",(function(){window.location.href="/"}))}}},{key:"componentWillUnmount",value:function(){Object(C.a)("video").dispose()}},{key:"render",value:function(){var e=this.props.movie;return null!==e&&void 0!==e&&e.contents[0].url?r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement("div",{key:"".concat(e.title),className:"container body","data-test":"VideoComponent"},r.a.createElement("div",{className:"is-centered has-text-centered"},"Now Playing: ",e.title,r.a.createElement("video",{id:"video",style:{margin:"auto"},className:"video-js fullscreen",controls:!0,preload:"auto"},r.a.createElement("source",{src:e.contents[0].url,type:"video/mp4"}))))):(window.location.href="/",null)}}]),t}(r.a.Component),S=Object(s.b)((function(e){return{movie:e.position.movie}}),{postHistoryActions:function(e){return function(t){console.log(e),fetch("".concat(D,"/history/add"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?e.json().then((function(e){})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}}})(x),L=n(28),H=function(e,t){return function(n){n({type:"CLICK_VIDEO",movie:e,index:t})}},M=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props;(0,t.getHistoryActions)(null,"kayin",t.current_page),document.onkeydown=function(t){e.handleKeyDown(t),N(t)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.getHistoryActions,a=t.current_page,r=t.pages,o=t.loaded;switch(e.key){case"ArrowLeft":n(o,"kayin",Math.max(0,a-1));break;case"ArrowRight":n(o,"kayin",Math.min(r-1,a+1))}}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.getHistoryActions,a=e.current_page,o=e.pages,c=e.loaded;console.log(a),console.log(o);var i="",l="";if(null!==t)return 0!=t.length&&(l=r.a.createElement("div",null,r.a.createElement("p",{className:"has-text-centered"},"Page ",a+1," of ",o),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons is-centered"},r.a.createElement("button",{className:"is-link button",onClick:function(){return n(c,"kayin",Math.max(0,a-1))}},"Prev"),r.a.createElement("button",{className:"is-link button",onClick:function(){return n(c,"kayin",Math.min(o-1,a+1))}},"Next"))),i=r.a.createElement("div",null,r.a.createElement("table",{className:"table","data-test":"HistoryTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Watch Date"))),r.a.createElement("tbody",null,t.map((function(e,t){var n=function(e){var t=e.replace("T"," "),n=(t=t.substring(0,t.length-5)).split(" "),a=Object(L.a)(n,2);return[a[0],a[1]]}(e.createdAt),a=Object(L.a)(n,2),o=a[0],c=a[1];return r.a.createElement("tr",{key:e.createdAt,"data-test":"HistoryTableRow",id:"row".concat(t)},r.a.createElement("td",null,r.a.createElement("img",{src:e.imageUrl})),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.description),r.a.createElement("td",null,o,r.a.createElement("br",null),c))})))))),r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement("div",{className:"is-centered container","data-test":"FullWatchHistory"},r.a.createElement("p",{className:"has-text-centered"},"Your recent views",r.a.createElement("br",null),!1===c?r.a.createElement("i",{class:"fas fa-spinner fa-spin"}):"",!0===c&&0===t.length?"No view history":""),t.length>=5?l:"",r.a.createElement("br",null),i,r.a.createElement("br",null),l))}}]),t}(r.a.Component),V=Object(s.b)((function(e){return{history:e.history.history,loaded:e.history.loaded,pages:e.history.pages,current_page:e.history.current_page}}),{getHistoryActions:function(e,t,n){return function(a){!1!==e&&(a({type:"START_GET_HISTORY"}),fetch("".concat(D,"/history?username=").concat(t,"&page=").concat(n)).then((function(e){200===e.status?e.json().then((function(e){a({type:"GET_HISTORY",history:e.data,pages:e.pages,current_page:e.current_page})})):console.log("ERROR")})).catch((function(e){return console.log(e)})))}},videoClick:H})(M),U=n(41),Y=n.n(U),B=n(58),W=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.movie,n=e.position;n===e.selectedPosition&&document.getElementById("view-".concat(n).concat(t.title)).scrollIntoView({behavior:"smooth",block:"end"})}},{key:"render",value:function(){var e=this.props,t=e.movie,n=e.position,a=e.selectedPosition;return r.a.createElement("div",{id:"view-".concat(n).concat(t.title),className:"column movie","data-test":"Card"},r.a.createElement("div",null,r.a.createElement("img",{src:t.images[0].url,alt:"".concat(t.title,"-image"),className:n===a?"movieimg":""}),r.a.createElement("br",null),r.a.createElement("p",{className:"is-size-7"},t.title)))}}]),t}(r.a.Component),G=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.loadCarousell)(),document.onkeydown=function(){var t=Object(B.a)(Y.a.mark((function t(n){var a,r,o,c,i;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(a=N(n))){t.next=3;break}return t.abrupt("return");case 3:return r=e.props,o=r.keyDown,c=r.entries,i=r.selectedPosition,t.next=6,o(n,c[i]);case 6:"Enter"===n.key&&a&&e.props.history.push("/video");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var t=document.getElementById("carousell-scroll");t&&t.addEventListener("wheel",(function(e){e.deltaY>.1?t.scrollLeft+=100:e.deltaY<-.1&&(t.scrollLeft-=100)}))}},{key:"render",value:function(){var e=this.props,t=e.entries,n=e.selectedPosition,a=e.videoClick;return r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement("div",{"data-test":"Carousell"},r.a.createElement("p",{className:"has-text-centered"},"Video List"),r.a.createElement("div",{className:"carousell-wrapper"},r.a.createElement("div",{className:"carousell",id:"carousell-scroll"},r.a.createElement("div",{className:"columns"},t.map((function(e,t){return r.a.createElement(i.b,{to:"/video",key:"".concat(t).concat(e.title),onClick:function(){return a(e,t)}},r.a.createElement(W,{movie:e,position:t,selectedPosition:n}))})))))))}}]),t}(r.a.Component),K=Object(s.b)((function(e){return{entries:e.carousell.entries,loaded:e.carousell.loaded,totalCount:e.carousell.totalCount,lastInteractPosition:e.position.lastInteractPosition,selectedPosition:e.position.position}}),{loadCarousell:function(){return function(e){e({type:"START_CAROUSELL_LOAD"}),fetch("".concat(D,"/moviedata")).then((function(t){200===t.status?t.json().then((function(t){e({type:"CAROUSELL_LOADED",entries:t.entries,totalCount:t.totalCount}),e({type:"RESET_POSITION"})})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}},keyDown:function(e,t){return function(n){switch(e.key){case"ArrowLeft":n({type:"LEFT_ARROW"});break;case"ArrowRight":n({type:"RIGHT_ARROW"});break;case"Enter":n({type:"ENTER_KEY",movie:t})}}},videoClick:H})(G);c.a.render(r.a.createElement(s.a,{store:k},r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:K}),r.a.createElement(l.a,{path:"/history",exact:!0,component:V}),r.a.createElement(l.a,{path:"/video",exact:!0,component:S})))),document.getElementById("root"))},59:function(e,t,n){e.exports=n(104)},64:function(e,t,n){},66:function(e,t,n){},71:function(e,t){}},[[59,1,2]]]);
//# sourceMappingURL=main.eabb623b.chunk.js.map